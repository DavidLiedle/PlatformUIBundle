<link rel="import" href="../vendors/polymer/polymer-element.html">

<style>
ez-fieldinput {
    display: block;
    padding: 1em;
}

ez-fieldinput.is-invalid fieldset {
    background: #fdd;
}
</style>

<script>
(function () {
    class eZFieldInput extends Polymer.Element {
        static get is() {
            return 'ez-fieldinput';
        }

        constructor() {
            super();
            this.addEventListener('input', this._checkValidity.bind(this));
            //this.querySelector('input').addEventListener('invalid', this._checkValidity.bind(this));
        }

        _checkValidity(e) {
            let valid = true;

            this.querySelectorAll('input, select, textarea').forEach(function (formElement) {
                // should also probably change the way message are displayed
                valid = valid && formElement.validity.valid;
            });
            if ( !valid ) {
                this.classList.add('is-invalid');
            } else {
                this.classList.remove('is-invalid');
            }
        }
    }

    customElements.define(eZFieldInput.is, eZFieldInput);
})();
</script>
